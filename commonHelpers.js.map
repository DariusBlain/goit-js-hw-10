{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n//______________________________________________________________________\n\nconst input = document.querySelector('#datetime-picker');\nconst btn = document.querySelector('.btn');\nconst daysSpan = document.querySelector('[data-days]');\nconst hoursSpan = document.querySelector('[data-hours]');\nconst minutesSpan = document.querySelector('[data-minutes]');\nconst secondsSpan = document.querySelector('[data-seconds]');\nbtn.disabled = true;\n\nlet userSelectedDate;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    if (Number(selectedDates[0]) <= Date.now()) {\n      iziToast.error({\n        position: 'topRight', // bottomRight, bottomLeft, topRight, topLeft, topCenter, bottomCenter\n        progressBarColor: 'rgb(181, 27, 27)',\n        backgroundColor: 'rgb(239, 64, 64)',\n        iconUrl: '../img/error.svg',\n        message: 'Please choose a date in the future',\n        messageColor: 'rgb(255, 255, 255)',\n      });\n    } else {\n      btn.disabled = false;\n      userSelectedDate = selectedDates[0];\n    }\n  },\n};\n\nflatpickr('#datetime-picker', options);\n\n//________________Timer-Function_________________//\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\n//______________________________________________________//\n\nclass Timer {\n  constructor({ onTick }) {\n    this.isActive = false;\n    this.onTick = onTick;\n    this.intervalId = null;\n  }\n\n  start() {\n    if (this.isActive) {\n      return;\n    }\n    const startTime = Number(userSelectedDate);\n    this.isActive = true;\n\n    this.intervalId = setInterval(() => {\n      const currentTime = Date.now();\n      const deltaTime = startTime - currentTime;\n      const time = convertMs(deltaTime);\n      this.onTick(time);\n    }, 1000);\n    btn.disabled = true;\n    input.disabled = true;\n  }\n\n  stop() {\n    clearInterval(this.intervalId);\n    this.isActive = false;\n  }\n}\n\nconst timer = new Timer({\n  onTick: updateClockface,\n});\n\nfunction updateClockface({ days, hours, minutes, seconds }) {\n  daysSpan.textContent = addLeadingZero(days);\n  hoursSpan.textContent = addLeadingZero(hours);\n  minutesSpan.textContent = addLeadingZero(minutes);\n  secondsSpan.textContent = addLeadingZero(seconds);\n\n  if (days === 0 && hours === 0 && minutes === 0 && seconds === 0) {\n    timer.stop();\n  }\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nbtn.addEventListener('click', timer.start.bind(timer));\n"],"names":["input","btn","daysSpan","hoursSpan","minutesSpan","secondsSpan","userSelectedDate","options","selectedDates","iziToast","flatpickr","convertMs","ms","days","hours","minutes","seconds","Timer","onTick","startTime","currentTime","deltaTime","time","timer","updateClockface","addLeadingZero","value"],"mappings":"+IAQA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAM,SAAS,cAAc,MAAM,EACnCC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAC3DJ,EAAI,SAAW,GAEf,IAAIK,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACjB,OAAOA,EAAc,CAAC,CAAC,GAAK,KAAK,MACnCC,EAAS,MAAM,CACb,SAAU,WACV,iBAAkB,mBAClB,gBAAiB,mBACjB,QAAS,mBACT,QAAS,qCACT,aAAc,oBACtB,CAAO,GAEDR,EAAI,SAAW,GACfK,EAAmBE,EAAc,CAAC,EAErC,CACH,EAEAE,EAAU,mBAAoBH,CAAO,EAIrC,SAASI,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAIA,MAAMC,CAAM,CACV,YAAY,CAAE,OAAAC,GAAU,CACtB,KAAK,SAAW,GAChB,KAAK,OAASA,EACd,KAAK,WAAa,IACnB,CAED,OAAQ,CACN,GAAI,KAAK,SACP,OAEF,MAAMC,EAAY,OAAOb,CAAgB,EACzC,KAAK,SAAW,GAEhB,KAAK,WAAa,YAAY,IAAM,CAClC,MAAMc,EAAc,KAAK,MACnBC,EAAYF,EAAYC,EACxBE,EAAOX,EAAUU,CAAS,EAChC,KAAK,OAAOC,CAAI,CACjB,EAAE,GAAI,EACPrB,EAAI,SAAW,GACfD,EAAM,SAAW,EAClB,CAED,MAAO,CACL,cAAc,KAAK,UAAU,EAC7B,KAAK,SAAW,EACjB,CACH,CAEA,MAAMuB,EAAQ,IAAIN,EAAM,CACtB,OAAQO,CACV,CAAC,EAED,SAASA,EAAgB,CAAE,KAAAX,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC1Dd,EAAS,YAAcuB,EAAeZ,CAAI,EAC1CV,EAAU,YAAcsB,EAAeX,CAAK,EAC5CV,EAAY,YAAcqB,EAAeV,CAAO,EAChDV,EAAY,YAAcoB,EAAeT,CAAO,EAE5CH,IAAS,GAAKC,IAAU,GAAKC,IAAY,GAAKC,IAAY,GAC5DO,EAAM,KAAI,CAEd,CAEA,SAASE,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEAzB,EAAI,iBAAiB,QAASsB,EAAM,MAAM,KAAKA,CAAK,CAAC"}